
创建开发证书及对应描述文件

1.创建AppID
需要：name、bundleid、service(apns)
生成： 无

2.创建Certifiactes，即cer证书
需要：
type(开发[开发、apns]or 发布[appstore&adhoc、apns])
csr文件(证书签署请求，本机钥匙串生成)
(可选)如果是apns 需要额外选择appid
生成：
cer证书(已经签署的证书，分开发证书和发布证书，包含p12私钥，对应上传的csr)
如果没有选appid，则证书名称是账号持有人名称，如果选appid(例如推送)，则名称是appid对应的bundleid
用途：开发机安装，发给别人

3.添加测试设备
xcode — device — 查看设备identifier

4.生成provisioning profiles，即描述文件
需要：
type(开发[开发]or 发布[AppStore、adhoc])、设备、appid
生成：
provisioning profile

注：
p12可以是公钥也可以是私钥，可以在钥匙串查看

************************************************************************************************************************************************
************************************************************************************************************************************************

创建发布证书及对应描述文件

发布cer证书
Certifiactes - 发布 - appstore/adhoc - 根据提示创建
appstore/adhoc类型的证书无需选择AppID

描述文件
选择type、appid，即可创建
appstore类型无需选择设备
adhoc要选择设备


************************************************************************************************************************************************
************************************************************************************************************************************************

证书类型介绍及制作


1.个人开发者证书

2.公司证书与企业证书（inhouse）
公司证书可以上app store
企业证书不可以上app store 只能在公司内部使用 大于100人

3.教育机构

ad-hoc:发布证书一种，主要用于给测试团队测试，最多100人


apns证书：推送证书，分开发生产，下面按照开发
1.创建appid：创建时选择推送服务，此时推送服务未可用
2.Certifiactes下创建推送用证书：类型选择apns，钥匙串生成csr上传，即可生成，生成后第一步的推送服务即可用，下载下来安装，包含p12
3.(可选)添加测试设备
4.创建描述文件：选择具有推送服务的appid、设备、证书类型等创建


************************************************************************************************************************************************
************************************************************************************************************************************************

越狱 重签名

mac通过ssh登录越狱设备
http://www.app111.com/doc/100021886_1.html

给app重新签名（查看是否有用keychain）
codesign -f -s ‘证书名（通过钥匙串-我的证书查看）’ xxx.app(通过解压ipa可以获得)
例子：
codesign -f -s 'iPhone Distribution: Beijing Leyu Communication Chain Shuyang Procurement Center Co., Ltd.' Downloads/Payload/最强王者.app/

查看app的信息，可查看用哪个证书签名
codesign -vv -d Downloads/Payload/最强王者.app/

查看是否有用keychain
把app压缩为zip，改后缀为ipa，安装在未越狱机器上，运行看日志
keychain分两种，一种是以键值对存储，一种是以证书存储，如果通过证书的方式打包若干个不同的app，存储的资料可以互相获取，因为keychain是独立于沙盒的

参考：http://objccn.io/issue-17-2/



************************************************************************************************************************************************
************************************************************************************************************************************************

xcode8免证书真机调试

项目bundleId必须设置为一个独一无二的
项目设置 - build setting - Signing - Code Signing Identifier 全部选择iOS Developer
项目设置 - build setting - Signing - 最后两个Provisioning Profile 全部选择Automtically
项目设置 - build setting - Signing - Development Team 不用修改 后面会自动更改
项目设置 - General - Signing - automtically manage signing 打勾
项目设置 - General - Signing - Team 选择一个开发者，一般免证书选择个人开发者，选择之后就会根据bundleId自动生成并设置好描述文件

然后就可以插入真机调试，第一次运行需要在真机的设置 - 通用 - 描述文件与设备管理 信任对应的开发者

************************************************************************************************************************************************
************************************************************************************************************************************************

常见问题

选择了development team之后提示过期要重新登录，则去xcode - preferences - accounts 从新输入密码登录对应账号

可以看到自己的设备，编译也通过，但run提示Could not change executable permissions on the application
这个错误是因为 证书我们用了两次。就是说在真机上已经有了一个用了此证书的项目存在，只要把之前的项目从真机上删掉，这个项目就可以使用了。

如何把证书导出给其他人使用
钥匙串 — 登录 — “我的证书”或“证书” — 选择对应证书 — 右键导出
注意根据实际情况，有可能被要求选择证书下的密钥导出，或者直接对证书导出（例如友盟推送）

创建描述文件时提示没有对应的Certifiactes
有可能是根开发/生产证书（名称为账号持有人的证书）被删除了，重新创建一个根证书就好

删除多余描述文件
~/Library/MobileDevice/Provisioning Profiles/

如果登录开发者后台见不到证书配置选项，右上角选择团队
